{"ast":null,"code":"import React,{Fragment,useEffect}from'react';import{Link}from'react-router-dom';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{allUsers,deleteUser,clearErrors}from'../../actions/userActions';import{DELETE_USER_RESET}from'../../constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UsersList=function UsersList(_ref){var history=_ref.history;var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.allUsers;}),loading=_useSelector.loading,error=_useSelector.error,users=_useSelector.users;var _useSelector2=useSelector(function(state){return state.user;}),isDeleted=_useSelector2.isDeleted;useEffect(function(){dispatch(allUsers());if(error){alert.error(error);dispatch(clearErrors());}if(isDeleted){alert.success('User deleted successfully');history.push('/admin/users');dispatch({type:DELETE_USER_RESET});}},[dispatch,alert,error,isDeleted,history]);var deleteUserHandler=function deleteUserHandler(id){dispatch(deleteUser(id));};var setUsers=function setUsers(){var data={columns:[{label:'User ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Email',field:'email',sort:'asc'},{label:'Role',field:'role',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};users.forEach(function(user){data.rows.push({id:user._id,name:user.name,email:user.email,role:user.role,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/user/\".concat(user._id),className:\"btn btn-primary py-1 px-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",onClick:function onClick(){return deleteUserHandler(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'All Users'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"All Users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setUsers(),className:\"px-3\",bordered:true,striped:true,hover:true})]})})]})]});};export default UsersList;","map":{"version":3,"sources":["/home/douglas/Downloads/ProShop/frontend/src/components/admin/UsersList.js"],"names":["React","Fragment","useEffect","Link","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","allUsers","deleteUser","clearErrors","DELETE_USER_RESET","UsersList","history","alert","dispatch","state","loading","error","users","user","isDeleted","success","push","type","deleteUserHandler","id","setUsers","data","columns","label","field","sort","rows","forEach","_id","name","email","role","actions"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport { MDBDataTable } from 'mdbreact'\n\nimport MetaData from '../layout/MetaData'\nimport Loader from '../layout/Loader'\nimport Sidebar from './Sidebar'\n\nimport { useAlert } from 'react-alert'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { allUsers, deleteUser, clearErrors } from '../../actions/userActions'\nimport { DELETE_USER_RESET } from '../../constants/userConstants'\n\nconst UsersList = ({ history }) => {\n\n    const alert = useAlert();\n    const dispatch = useDispatch();\n\n    const { loading, error, users } = useSelector(state => state.allUsers);\n    const { isDeleted } = useSelector(state => state.user)\n\n    useEffect(() => {\n        dispatch(allUsers());\n\n        if (error) {\n            alert.error(error);\n            dispatch(clearErrors())\n        }\n\n        if (isDeleted) {\n            alert.success('User deleted successfully');\n            history.push('/admin/users');\n            dispatch({ type: DELETE_USER_RESET })\n        }\n\n    }, [dispatch, alert, error, isDeleted, history])\n\n    const deleteUserHandler = (id) => {\n        dispatch(deleteUser(id))\n    }\n\n    const setUsers = () => {\n        const data = {\n            columns: [\n                {\n                    label: 'User ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Name',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Email',\n                    field: 'email',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Role',\n                    field: 'role',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n                },\n            ],\n            rows: []\n        }\n\n        users.forEach(user => {\n            data.rows.push({\n                id: user._id,\n                name: user.name,\n                email: user.email,\n                role: user.role,\n\n                actions: <Fragment>\n                    <Link to={`/admin/user/${user._id}`} className=\"btn btn-primary py-1 px-2\">\n                        <i className=\"fa fa-pencil\"></i>\n                    </Link>\n                    <button className=\"btn btn-danger py-1 px-2 ml-2\" onClick={() => deleteUserHandler(user._id)}>\n                        <i className=\"fa fa-trash\"></i>\n                    </button>\n                </Fragment>\n            })\n        })\n\n        return data;\n    }\n\n\n    return (\n        <Fragment>\n            <MetaData title={'All Users'} />\n            <div className=\"row\">\n                <div className=\"col-12 col-md-2\">\n                    <Sidebar />\n                </div>\n\n                <div className=\"col-12 col-md-10\">\n                    <Fragment>\n                        <h1 className=\"my-5\">All Users</h1>\n\n                        {loading ? <Loader /> : (\n                            <MDBDataTable\n                                data={setUsers()}\n                                className=\"px-3\"\n                                bordered\n                                striped\n                                hover\n                            />\n                        )}\n\n                    </Fragment>\n                </div>\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default UsersList\n"]},"metadata":{},"sourceType":"module"}