{"ast":null,"code":"import React,{Fragment}from'react';import{Link}from'react-router-dom';import MetaData from'../layout/MetaData';import CheckoutSteps from'./CheckoutSteps';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfirmOrder=function ConfirmOrder(_ref){var history=_ref.history;var _useSelector=useSelector(function(state){return state.cart;}),cartItems=_useSelector.cartItems,shippingInfo=_useSelector.shippingInfo;var _useSelector2=useSelector(function(state){return state.auth;}),user=_useSelector2.user;// Calculate Order Prices\nvar itemsPrice=cartItems.reduce(function(acc,item){return acc+item.price*item.quantity;},0);var shippingPrice=itemsPrice>200?0:25;var taxPrice=Number((0.05*itemsPrice).toFixed(2));var totalPrice=(itemsPrice+shippingPrice+taxPrice).toFixed(2);var processToPayment=function processToPayment(){var data={itemsPrice:itemsPrice.toFixed(2),shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice};sessionStorage.setItem('orderInfo',JSON.stringify(data));history.push('/payment');};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Confirm Order'}),/*#__PURE__*/_jsx(CheckoutSteps,{shipping:true,confirmOrder:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-8 mt-5 order-confirm\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Shipping Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",user&&user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",shippingInfo.phoneNo]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Address:\"}),\" \",\"\".concat(shippingInfo.address,\", \").concat(shippingInfo.city,\", \").concat(shippingInfo.postalCode,\", \").concat(shippingInfo.country)]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-4\",children:\"Your Cart Items:\"}),cartItems.map(function(item){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item my-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:\"Laptop\",height:\"45\",width:\"65\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-4 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[item.quantity,\" x $\",item.price,\" = \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",(item.quantity*item.price).toFixed(2)]})]})})]})},item.product),/*#__PURE__*/_jsx(\"hr\",{})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-3 my-4\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"order_summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",itemsPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",shippingPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",taxPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",totalPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"checkout_btn\",className:\"btn btn-primary btn-block\",onClick:processToPayment,children:\"Proceed to Payment\"})]})})]})]});};export default ConfirmOrder;","map":{"version":3,"sources":["/home/douglas/Downloads/ProShop/frontend/src/components/cart/ConfirmOrder.js"],"names":["React","Fragment","Link","MetaData","CheckoutSteps","useSelector","ConfirmOrder","history","state","cart","cartItems","shippingInfo","auth","user","itemsPrice","reduce","acc","item","price","quantity","shippingPrice","taxPrice","Number","toFixed","totalPrice","processToPayment","data","sessionStorage","setItem","JSON","stringify","push","name","phoneNo","address","city","postalCode","country","map","image","product"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport MetaData from '../layout/MetaData'\nimport CheckoutSteps from './CheckoutSteps'\n\nimport { useSelector } from 'react-redux'\n\nconst ConfirmOrder = ({ history }) => {\n\n    const { cartItems, shippingInfo } = useSelector(state => state.cart)\n    const { user } = useSelector(state => state.auth)\n\n    // Calculate Order Prices\n    const itemsPrice = cartItems.reduce((acc, item) => acc + item.price * item.quantity, 0)\n    const shippingPrice = itemsPrice > 200 ? 0 : 25\n    const taxPrice = Number((0.05 * itemsPrice).toFixed(2))\n    const totalPrice = (itemsPrice + shippingPrice + taxPrice).toFixed(2)\n\n    const processToPayment = () => {\n        const data = {\n            itemsPrice: itemsPrice.toFixed(2),\n            shippingPrice,\n            taxPrice,\n            totalPrice\n        }\n\n        sessionStorage.setItem('orderInfo', JSON.stringify(data))\n        history.push('/payment')\n    }\n\n    return (\n        <Fragment>\n\n            <MetaData title={'Confirm Order'} />\n\n            <CheckoutSteps shipping confirmOrder />\n\n            <div className=\"row d-flex justify-content-between\">\n                <div className=\"col-12 col-lg-8 mt-5 order-confirm\">\n\n                    <h4 className=\"mb-3\">Shipping Info</h4>\n                    <p><b>Name:</b> {user && user.name}</p>\n                    <p><b>Phone:</b> {shippingInfo.phoneNo}</p>\n                    <p className=\"mb-4\"><b>Address:</b> {`${shippingInfo.address}, ${shippingInfo.city}, ${shippingInfo.postalCode}, ${shippingInfo.country}`}</p>\n\n                    <hr />\n                    <h4 className=\"mt-4\">Your Cart Items:</h4>\n\n                    {cartItems.map(item => (\n                        <Fragment>\n                            <hr />\n                            <div className=\"cart-item my-1\" key={item.product}>\n                                <div className=\"row\">\n                                    <div className=\"col-4 col-lg-2\">\n                                        <img src={item.image} alt=\"Laptop\" height=\"45\" width=\"65\" />\n                                    </div>\n\n                                    <div className=\"col-5 col-lg-6\">\n                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                    </div>\n\n\n                                    <div className=\"col-4 col-lg-4 mt-4 mt-lg-0\">\n                                        <p>{item.quantity} x ${item.price} = <b>${(item.quantity * item.price).toFixed(2)}</b></p>\n                                    </div>\n\n                                </div>\n                            </div>\n                            <hr />\n                        </Fragment>\n                    ))}\n\n\n\n                </div>\n\n                <div className=\"col-12 col-lg-3 my-4\">\n                    <div id=\"order_summary\">\n                        <h4>Order Summary</h4>\n                        <hr />\n                        <p>Subtotal:  <span className=\"order-summary-values\">${itemsPrice}</span></p>\n                        <p>Shipping: <span className=\"order-summary-values\">${shippingPrice}</span></p>\n                        <p>Tax:  <span className=\"order-summary-values\">${taxPrice}</span></p>\n\n                        <hr />\n\n                        <p>Total: <span className=\"order-summary-values\">${totalPrice}</span></p>\n\n                        <hr />\n                        <button id=\"checkout_btn\" className=\"btn btn-primary btn-block\" onClick={processToPayment}>Proceed to Payment</button>\n                    </div>\n                </div>\n\n\n            </div>\n\n        </Fragment>\n    )\n}\n\nexport default ConfirmOrder\n"]},"metadata":{},"sourceType":"module"}