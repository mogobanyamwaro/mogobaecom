{"ast":null,"code":"import _regeneratorRuntime from\"/home/douglas/Downloads/ProShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/douglas/Downloads/ProShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/douglas/Downloads/ProShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Route}from'react-router-dom';import Header from'./components/layout/Header';import Footer from'./components/layout/Footer';import Home from'./components/Home';import ProductDetails from'./components/product/ProductDetails';// Cart Imports\nimport Cart from'./components/cart/Cart';import Shipping from'./components/cart/Shipping';import ConfirmOrder from'./components/cart/ConfirmOrder';import Payment from'./components/cart/Payment';import OrderSuccess from'./components/cart/OrderSuccess';// Order Imports\nimport ListOrders from'./components/order/ListOrders';import OrderDetails from'./components/order/OrderDetails';// Auth or User imports\nimport Login from'./components/user/Login';import Register from'./components/user/Register';import Profile from'./components/user/Profile';import UpdateProfile from'./components/user/UpdateProfile';import UpdatePassword from'./components/user/UpdatePassword';import ForgotPassword from'./components/user/ForgotPassword';import NewPassword from'./components/user/NewPassword';// Admin Imports\nimport Dashboard from'./components/admin/Dashboard';import ProductsList from'./components/admin/ProductsList';import NewProduct from'./components/admin/NewProduct';import UpdateProduct from'./components/admin/UpdateProduct';import OrdersList from'./components/admin/OrdersList';import ProcessOrder from'./components/admin/ProcessOrder';import UsersList from'./components/admin/UsersList';import UpdateUser from'./components/admin/UpdateUser';import ProductReviews from'./components/admin/ProductReviews';import ProtectedRoute from'./components/route/ProtectedRoute';import{loadUser}from'./actions/userActions';import{useSelector}from'react-redux';import store from'./store';import axios from'axios';// Payment\nimport{Elements}from'@stripe/react-stripe-js';import{loadStripe}from'@stripe/stripe-js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),stripeApiKey=_useState2[0],setStripeApiKey=_useState2[1];useEffect(function(){store.dispatch(loadUser());function getStripApiKey(){return _getStripApiKey.apply(this,arguments);}function _getStripApiKey(){_getStripApiKey=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/v1/stripeapi');case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setStripeApiKey(data.stripeApiKey);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getStripApiKey.apply(this,arguments);}getStripApiKey();},[]);var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user,isAuthenticated=_useSelector.isAuthenticated,loading=_useSelector.loading;return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container container-fluid\",children:[/*#__PURE__*/_jsx(Route,{path:\"/\",component:Home,exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/search/:keyword\",component:Home}),/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",component:ProductDetails,exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",component:Cart,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/shipping\",component:Shipping}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/confirm\",component:ConfirmOrder,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/success\",component:OrderSuccess}),stripeApiKey&&/*#__PURE__*/_jsx(Elements,{stripe:loadStripe(stripeApiKey),children:/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/payment\",component:Payment})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",component:Login}),/*#__PURE__*/_jsx(Route,{path:\"/register\",component:Register}),/*#__PURE__*/_jsx(Route,{path:\"/password/forgot\",component:ForgotPassword,exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/password/reset/:token\",component:NewPassword,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/me\",component:Profile,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/me/update\",component:UpdateProfile,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/password/update\",component:UpdatePassword,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/orders/me\",component:ListOrders,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/order/:id\",component:OrderDetails,exact:true})]}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/dashboard\",isAdmin:true,component:Dashboard,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/products\",isAdmin:true,component:ProductsList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/product\",isAdmin:true,component:NewProduct,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/product/:id\",isAdmin:true,component:UpdateProduct,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/orders\",isAdmin:true,component:OrdersList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/order/:id\",isAdmin:true,component:ProcessOrder,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/users\",isAdmin:true,component:UsersList,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/user/:id\",isAdmin:true,component:UpdateUser,exact:true}),/*#__PURE__*/_jsx(ProtectedRoute,{path:\"/admin/reviews\",isAdmin:true,component:ProductReviews,exact:true}),!loading&&(!isAuthenticated||user.role!=='admin')&&/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/home/douglas/Downloads/ProShop/frontend/src/App.js"],"names":["React","useEffect","useState","BrowserRouter","Router","Route","Header","Footer","Home","ProductDetails","Cart","Shipping","ConfirmOrder","Payment","OrderSuccess","ListOrders","OrderDetails","Login","Register","Profile","UpdateProfile","UpdatePassword","ForgotPassword","NewPassword","Dashboard","ProductsList","NewProduct","UpdateProduct","OrdersList","ProcessOrder","UsersList","UpdateUser","ProductReviews","ProtectedRoute","loadUser","useSelector","store","axios","Elements","loadStripe","App","stripeApiKey","setStripeApiKey","dispatch","getStripApiKey","get","data","state","auth","user","isAuthenticated","loading","role"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,KAA+C,kBAA/C,CAEA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,4BAAnB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,cAAP,KAA2B,qCAA3B,CAEA;AACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CAEA;AACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CAEA;AACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,2BAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CAEA;AACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,mCAA3B,CAEA,MAAOC,CAAAA,cAAP,KAA2B,mCAA3B,CACA,OAASC,QAAT,KAAyB,uBAAzB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,OAASC,UAAT,KAA2B,mBAA3B,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAwCtC,QAAQ,CAAC,EAAD,CAAhD,wCAAOuC,YAAP,eAAqBC,eAArB,eAEAzC,SAAS,CAAC,UAAM,CACdmC,KAAK,CAACO,QAAN,CAAeT,QAAQ,EAAvB,EADc,QAGCU,CAAAA,cAHD,oJAGd,mLACyBP,CAAAA,KAAK,CAACQ,GAAN,CAAU,mBAAV,CADzB,uCACUC,IADV,kBACUA,IADV,CAGEJ,eAAe,CAACI,IAAI,CAACL,YAAN,CAAf,CAHF,sDAHc,iDASdG,cAAc,GACf,CAVQ,CAUN,EAVM,CAAT,CAYA,iBAA2CT,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAAtD,CAAQC,IAAR,cAAQA,IAAR,CAAcC,eAAd,cAAcA,eAAd,CAA+BC,OAA/B,cAA+BA,OAA/B,CAEA,mBACE,KAAC,MAAD,wBACE,aAAK,SAAS,CAAC,KAAf,wBACE,KAAC,MAAD,IADF,cAEE,aAAK,SAAS,CAAC,2BAAf,wBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,SAAS,CAAE3C,IAA3B,CAAiC,KAAK,KAAtC,EADF,cAEE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,CAA+B,SAAS,CAAEA,IAA1C,EAFF,cAGE,KAAC,KAAD,EAAO,IAAI,CAAC,cAAZ,CAA2B,SAAS,CAAEC,cAAtC,CAAsD,KAAK,KAA3D,EAHF,cAKE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAEC,IAA/B,CAAqC,KAAK,KAA1C,EALF,cAME,KAAC,cAAD,EAAgB,IAAI,CAAC,WAArB,CAAiC,SAAS,CAAEC,QAA5C,EANF,cAOE,KAAC,cAAD,EAAgB,IAAI,CAAC,UAArB,CAAgC,SAAS,CAAEC,YAA3C,CAAyD,KAAK,KAA9D,EAPF,cAQE,KAAC,cAAD,EAAgB,IAAI,CAAC,UAArB,CAAgC,SAAS,CAAEE,YAA3C,EARF,CASG2B,YAAY,eACX,KAAC,QAAD,EAAU,MAAM,CAAEF,UAAU,CAACE,YAAD,CAA5B,uBACE,KAAC,cAAD,EAAgB,IAAI,CAAC,UAArB,CAAgC,SAAS,CAAE5B,OAA3C,EADF,EAVJ,cAeE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,SAAS,CAAEI,KAAhC,EAfF,cAgBE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,SAAS,CAAEC,QAAnC,EAhBF,cAiBE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,CAA+B,SAAS,CAAEI,cAA1C,CAA0D,KAAK,KAA/D,EAjBF,cAkBE,KAAC,KAAD,EAAO,IAAI,CAAC,wBAAZ,CAAqC,SAAS,CAAEC,WAAhD,CAA6D,KAAK,KAAlE,EAlBF,cAmBE,KAAC,cAAD,EAAgB,IAAI,CAAC,KAArB,CAA2B,SAAS,CAAEJ,OAAtC,CAA+C,KAAK,KAApD,EAnBF,cAoBE,KAAC,cAAD,EAAgB,IAAI,CAAC,YAArB,CAAkC,SAAS,CAAEC,aAA7C,CAA4D,KAAK,KAAjE,EApBF,cAqBE,KAAC,cAAD,EACE,IAAI,CAAC,kBADP,CAEE,SAAS,CAAEC,cAFb,CAGE,KAAK,KAHP,EArBF,cA2BE,KAAC,cAAD,EAAgB,IAAI,CAAC,YAArB,CAAkC,SAAS,CAAEN,UAA7C,CAAyD,KAAK,KAA9D,EA3BF,cA4BE,KAAC,cAAD,EAAgB,IAAI,CAAC,YAArB,CAAkC,SAAS,CAAEC,YAA7C,CAA2D,KAAK,KAAhE,EA5BF,GAFF,cAiCE,KAAC,cAAD,EACE,IAAI,CAAC,YADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEQ,SAHb,CAIE,KAAK,KAJP,EAjCF,cAuCE,KAAC,cAAD,EACE,IAAI,CAAC,iBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,YAHb,CAIE,KAAK,KAJP,EAvCF,cA6CE,KAAC,cAAD,EACE,IAAI,CAAC,gBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,UAHb,CAIE,KAAK,KAJP,EA7CF,cAmDE,KAAC,cAAD,EACE,IAAI,CAAC,oBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,aAHb,CAIE,KAAK,KAJP,EAnDF,cAyDE,KAAC,cAAD,EACE,IAAI,CAAC,eADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,UAHb,CAIE,KAAK,KAJP,EAzDF,cA+DE,KAAC,cAAD,EACE,IAAI,CAAC,kBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,YAHb,CAIE,KAAK,KAJP,EA/DF,cAqEE,KAAC,cAAD,EACE,IAAI,CAAC,cADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,SAHb,CAIE,KAAK,KAJP,EArEF,cA2EE,KAAC,cAAD,EACE,IAAI,CAAC,iBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,UAHb,CAIE,KAAK,KAJP,EA3EF,cAiFE,KAAC,cAAD,EACE,IAAI,CAAC,gBADP,CAEE,OAAO,CAAE,IAFX,CAGE,SAAS,CAAEC,cAHb,CAIE,KAAK,KAJP,EAjFF,CAwFG,CAACmB,OAAD,GAAa,CAACD,eAAD,EAAoBD,IAAI,CAACG,IAAL,GAAc,OAA/C,gBAA2D,KAAC,MAAD,IAxF9D,GADF,EADF,CA8FD,CAED,cAAeZ,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport Header from './components/layout/Header';\nimport Footer from './components/layout/Footer';\n\nimport Home from './components/Home';\nimport ProductDetails from './components/product/ProductDetails';\n\n// Cart Imports\nimport Cart from './components/cart/Cart';\nimport Shipping from './components/cart/Shipping';\nimport ConfirmOrder from './components/cart/ConfirmOrder';\nimport Payment from './components/cart/Payment';\nimport OrderSuccess from './components/cart/OrderSuccess';\n\n// Order Imports\nimport ListOrders from './components/order/ListOrders';\nimport OrderDetails from './components/order/OrderDetails';\n\n// Auth or User imports\nimport Login from './components/user/Login';\nimport Register from './components/user/Register';\nimport Profile from './components/user/Profile';\nimport UpdateProfile from './components/user/UpdateProfile';\nimport UpdatePassword from './components/user/UpdatePassword';\nimport ForgotPassword from './components/user/ForgotPassword';\nimport NewPassword from './components/user/NewPassword';\n\n// Admin Imports\nimport Dashboard from './components/admin/Dashboard';\nimport ProductsList from './components/admin/ProductsList';\nimport NewProduct from './components/admin/NewProduct';\nimport UpdateProduct from './components/admin/UpdateProduct';\nimport OrdersList from './components/admin/OrdersList';\nimport ProcessOrder from './components/admin/ProcessOrder';\nimport UsersList from './components/admin/UsersList';\nimport UpdateUser from './components/admin/UpdateUser';\nimport ProductReviews from './components/admin/ProductReviews';\n\nimport ProtectedRoute from './components/route/ProtectedRoute';\nimport { loadUser } from './actions/userActions';\nimport { useSelector } from 'react-redux';\nimport store from './store';\nimport axios from 'axios';\n\n// Payment\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\n\nfunction App() {\n  const [stripeApiKey, setStripeApiKey] = useState('');\n\n  useEffect(() => {\n    store.dispatch(loadUser());\n\n    async function getStripApiKey() {\n      const { data } = await axios.get('/api/v1/stripeapi');\n\n      setStripeApiKey(data.stripeApiKey);\n    }\n\n    getStripApiKey();\n  }, []);\n\n  const { user, isAuthenticated, loading } = useSelector((state) => state.auth);\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Header />\n        <div className=\"container container-fluid\">\n          <Route path=\"/\" component={Home} exact />\n          <Route path=\"/search/:keyword\" component={Home} />\n          <Route path=\"/product/:id\" component={ProductDetails} exact />\n\n          <Route path=\"/cart\" component={Cart} exact />\n          <ProtectedRoute path=\"/shipping\" component={Shipping} />\n          <ProtectedRoute path=\"/confirm\" component={ConfirmOrder} exact />\n          <ProtectedRoute path=\"/success\" component={OrderSuccess} />\n          {stripeApiKey && (\n            <Elements stripe={loadStripe(stripeApiKey)}>\n              <ProtectedRoute path=\"/payment\" component={Payment} />\n            </Elements>\n          )}\n\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n          <Route path=\"/password/forgot\" component={ForgotPassword} exact />\n          <Route path=\"/password/reset/:token\" component={NewPassword} exact />\n          <ProtectedRoute path=\"/me\" component={Profile} exact />\n          <ProtectedRoute path=\"/me/update\" component={UpdateProfile} exact />\n          <ProtectedRoute\n            path=\"/password/update\"\n            component={UpdatePassword}\n            exact\n          />\n\n          <ProtectedRoute path=\"/orders/me\" component={ListOrders} exact />\n          <ProtectedRoute path=\"/order/:id\" component={OrderDetails} exact />\n        </div>\n\n        <ProtectedRoute\n          path=\"/dashboard\"\n          isAdmin={true}\n          component={Dashboard}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/products\"\n          isAdmin={true}\n          component={ProductsList}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/product\"\n          isAdmin={true}\n          component={NewProduct}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/product/:id\"\n          isAdmin={true}\n          component={UpdateProduct}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/orders\"\n          isAdmin={true}\n          component={OrdersList}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/order/:id\"\n          isAdmin={true}\n          component={ProcessOrder}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/users\"\n          isAdmin={true}\n          component={UsersList}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/user/:id\"\n          isAdmin={true}\n          component={UpdateUser}\n          exact\n        />\n        <ProtectedRoute\n          path=\"/admin/reviews\"\n          isAdmin={true}\n          component={ProductReviews}\n          exact\n        />\n\n        {!loading && (!isAuthenticated || user.role !== 'admin') && <Footer />}\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}