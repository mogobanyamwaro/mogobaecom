{"ast":null,"code":"import _slicedToArray from\"/home/douglas/Downloads/ProShop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import{MDBDataTable}from'mdbreact';import MetaData from'../layout/MetaData';import Loader from'../layout/Loader';import Sidebar from'./Sidebar';import{useAlert}from'react-alert';import{useDispatch,useSelector}from'react-redux';import{getProductReviews,deleteReview,clearErrors}from'../../actions/productActions';import{DELETE_REVIEW_RESET}from'../../constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductReviews=function ProductReviews(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var alert=useAlert();var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productReviews;}),error=_useSelector.error,reviews=_useSelector.reviews;var _useSelector2=useSelector(function(state){return state.review;}),isDeleted=_useSelector2.isDeleted,deleteError=_useSelector2.error;useEffect(function(){if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(productId!==''){dispatch(getProductReviews(productId));}if(isDeleted){alert.success('Review deleted successfully');dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,productId,isDeleted,deleteError]);var deleteReviewHandler=function deleteReviewHandler(id){dispatch(deleteReview(id,productId));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(getProductReviews(productId));};var setReviews=function setReviews(){var data={columns:[{label:'Review ID',field:'id',sort:'asc'},{label:'Rating',field:'rating',sort:'asc'},{label:'Comment',field:'comment',sort:'asc'},{label:'User',field:'user',sort:'asc'},{label:'Actions',field:'actions'}],rows:[]};reviews.forEach(function(review){data.rows.push({id:review._id,rating:review.rating,comment:review.comment,user:review.name,actions:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-1 px-2 ml-2\",onClick:function onClick(){return deleteReviewHandler(review._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})});});return data;};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Product Reviews'}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"productId_field\",children:\"Enter Product ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"productId_field\",className:\"form-control\",value:productId,onChange:function onChange(e){return setProductId(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{id:\"search_button\",type:\"submit\",className:\"btn btn-primary btn-block py-2\",children:\"SEARCH\"})]})})}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(MDBDataTable,{data:setReviews(),className:\"px-3\",bordered:true,striped:true,hover:true}):/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 text-center\",children:\"No Reviews.\"})]})})]})]});};export default ProductReviews;","map":{"version":3,"sources":["/home/douglas/Downloads/ProShop/frontend/src/components/admin/ProductReviews.js"],"names":["React","Fragment","useState","useEffect","MDBDataTable","MetaData","Loader","Sidebar","useAlert","useDispatch","useSelector","getProductReviews","deleteReview","clearErrors","DELETE_REVIEW_RESET","ProductReviews","productId","setProductId","alert","dispatch","state","productReviews","error","reviews","review","isDeleted","deleteError","success","type","deleteReviewHandler","id","submitHandler","e","preventDefault","setReviews","data","columns","label","field","sort","rows","forEach","push","_id","rating","comment","user","name","actions","target","value","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\nimport { MDBDataTable } from 'mdbreact';\n\nimport MetaData from '../layout/MetaData';\nimport Loader from '../layout/Loader';\nimport Sidebar from './Sidebar';\n\nimport { useAlert } from 'react-alert';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getProductReviews,\n  deleteReview,\n  clearErrors,\n} from '../../actions/productActions';\nimport { DELETE_REVIEW_RESET } from '../../constants/productConstants';\n\nconst ProductReviews = () => {\n  const [productId, setProductId] = useState('');\n\n  const alert = useAlert();\n  const dispatch = useDispatch();\n\n  const { error, reviews } = useSelector((state) => state.productReviews);\n  const { isDeleted, error: deleteError } = useSelector(\n    (state) => state.review\n  );\n\n  useEffect(() => {\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (deleteError) {\n      alert.error(deleteError);\n      dispatch(clearErrors());\n    }\n\n    if (productId !== '') {\n      dispatch(getProductReviews(productId));\n    }\n\n    if (isDeleted) {\n      alert.success('Review deleted successfully');\n      dispatch({ type: DELETE_REVIEW_RESET });\n    }\n  }, [dispatch, alert, error, productId, isDeleted, deleteError]);\n\n  const deleteReviewHandler = (id) => {\n    dispatch(deleteReview(id, productId));\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(getProductReviews(productId));\n  };\n\n  const setReviews = () => {\n    const data = {\n      columns: [\n        {\n          label: 'Review ID',\n          field: 'id',\n          sort: 'asc',\n        },\n        {\n          label: 'Rating',\n          field: 'rating',\n          sort: 'asc',\n        },\n        {\n          label: 'Comment',\n          field: 'comment',\n          sort: 'asc',\n        },\n        {\n          label: 'User',\n          field: 'user',\n          sort: 'asc',\n        },\n        {\n          label: 'Actions',\n          field: 'actions',\n        },\n      ],\n      rows: [],\n    };\n\n    reviews.forEach((review) => {\n      data.rows.push({\n        id: review._id,\n        rating: review.rating,\n        comment: review.comment,\n        user: review.name,\n\n        actions: (\n          <button\n            className='btn btn-danger py-1 px-2 ml-2'\n            onClick={() => deleteReviewHandler(review._id)}\n          >\n            <i className='fa fa-trash'></i>\n          </button>\n        ),\n      });\n    });\n\n    return data;\n  };\n\n  return (\n    <Fragment>\n      <MetaData title={'Product Reviews'} />\n      <div className='row'>\n        <div className='col-12 col-md-2'>\n          <Sidebar />\n        </div>\n\n        <div className='col-12 col-md-10'>\n          <Fragment>\n            <div className='row justify-content-center mt-5'>\n              <div className='col-5'>\n                <form onSubmit={submitHandler}>\n                  <div className='form-group'>\n                    <label htmlFor='productId_field'>Enter Product ID</label>\n                    <input\n                      type='text'\n                      id='productId_field'\n                      className='form-control'\n                      value={productId}\n                      onChange={(e) => setProductId(e.target.value)}\n                    />\n                  </div>\n\n                  <button\n                    id='search_button'\n                    type='submit'\n                    className='btn btn-primary btn-block py-2'\n                  >\n                    SEARCH\n                  </button>\n                </form>\n              </div>\n            </div>\n\n            {reviews && reviews.length > 0 ? (\n              <MDBDataTable\n                data={setReviews()}\n                className='px-3'\n                bordered\n                striped\n                hover\n              />\n            ) : (\n              <p className='mt-5 text-center'>No Reviews.</p>\n            )}\n          </Fragment>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ProductReviews;\n"]},"metadata":{},"sourceType":"module"}